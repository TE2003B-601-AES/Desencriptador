---------------------------------------------------------------
-- Company: ITESM - Campus Qro.entity
-- Author: Alexa Jimena González
--         Brisa Itzel Reyes
-- Date: 22/04/2024
-- Desing: ROM 16x4
-- Description: Implementation Add Round Key for Decryption
-- Tool Version: Altera Quartus Lite v21.2 build 842
-- Target Device: DE10-Lite (Terasic.com)
-- Version: 1.0
---------------------------------------------------------------
-- Library and Packages usage definition
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.numeric_std.all;
use IEEE.std_logic_unsigned.all;

entity InvAddRoundKey_tb is
end InvAddRoundKey_tb;

architecture InvAddRoundKey_Arch of InvAddRoundKey_tb is
  -- Component declaration
  component InvAddRoundKey
    Port (
      Clk     : in     std_logic;
      Start   : in     std_logic;
      Finish  : out    std_logic;
      DataIn  : in     std_logic_vector (127 downto 0);
      DataOut : out    std_logic_vector (127 downto 0)
    );
  end component;

  -- Constants
  
  constant CLK_PERIOD    : time := 20 ns;  -- Periodo del reloj (20 ns)
  constant SIM_TIME      : time := 100 us; -- Tiempo total de simulación (100 µs)

  -- Signals
  signal Clk       : std_logic := '0';
  signal Start     : std_logic := '0';
  signal Finish    : std_logic;
  signal DataIn    : std_logic_vector(127 downto 0);
  signal DataOut   : std_logic_vector(127 downto 0);
  signal Key       : std_logic_vector (127 downto 0);
  
begin
  -- Instantiate the Unit Under Test (UUT)
  uut: InvAddRoundKey
    port map (
      Clk     => Clk,
      Start   => Start,
      Finish  => Finish,
      DataIn  => DataIn,
      DataOut => DataOut
    );

  -- Clock process
  Clk_Process: process
  begin
    while now < SIM_TIME loop
      Clk <= '0';
      wait for CLK_PERIOD / 2;  --Wait half of the clock period (10 ns).
      Clk <= '1';
      wait for CLK_PERIOD / 2;  --Wait half of the clock period (10 ns).
    end loop;
    wait;  -- Espera indefinida al final de la simulación
  end process;

  -- Stimulus process
  Stimulus: process
  begin
	--- hold reset state for 100ns, always include the following statement
	wait for 100 ns;
	
 -- input values
	Start <= '1';
   DataIn <="00111001" & "00000010" & "11011100" & "00011001" &
				"00100101" & "11011100" & "00010001" & "01101010" &
				"10000100" & "00001001" & "10000101" & "00001011" &
				"00011101" & "11111011" & "10010111" & "00110010";
				
  
    wait for 20 ns;

    wait;
  end process;

end InvAddRoundKey_Arch;